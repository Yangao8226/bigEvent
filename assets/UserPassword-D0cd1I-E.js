import{q as _,s as n,o as v,a as g,w as a,y as b,v as r,x as w,bZ as V,E}from"./index-B_9v7rxY.js";import{E as x,a as y}from"./el-form-item-BfnBmPMM.js";import{E as F}from"./plugin-vueexport-helper-B9RgcdfJ.js";import{E as C}from"./el-input-BzJ4r5Fg.js";import{P as U}from"./PageContainer-rNz46Xs4.js";/* empty css                   */import"./_baseClone-DihTtDUj.js";const Z={__name:"UserPassword",setup(N){const i=_(),u=n(null),e=n({oldPassword:"",newPassword:"",confirmPassword:""}),p=n({oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度需在6-15位之间，且不能包含空格",trigger:"blur"},{validator:(t,o,s)=>{o===e.value.oldPassword?s(new Error("新密码不能与原密码相同")):s()},trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:(t,o,s)=>{o!==e.value.newPassword?s(new Error("两次输入密码不一致")):s()},trigger:"blur"}]}),f=()=>{u.value.validate(async t=>{if(t){const o={old_pwd:e.value.oldPassword,new_pwd:e.value.newPassword,re_pwd:e.value.confirmPassword};await V(o),E.success("修改密码成功,请重新登陆"),i.removeToken(),setTimeout(()=>{location.reload()},2e3)}else return!1})},c=()=>{u.value.resetFields()};return(t,o)=>{const s=C,d=x,m=F,P=y;return v(),g(U,null,{default:a(()=>[b("div",null,[r(P,{model:e.value,rules:p.value,ref_key:"refForm",ref:u,"label-width":"100px"},{default:a(()=>[r(d,{label:"原密码",prop:"oldPassword"},{default:a(()=>[r(s,{style:{width:"300px"},modelValue:e.value.oldPassword,"onUpdate:modelValue":o[0]||(o[0]=l=>e.value.oldPassword=l),"show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(d,{label:"新密码",prop:"newPassword"},{default:a(()=>[r(s,{style:{width:"300px"},modelValue:e.value.newPassword,"onUpdate:modelValue":o[1]||(o[1]=l=>e.value.newPassword=l),"show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(d,{label:"确认新密码",prop:"confirmPassword"},{default:a(()=>[r(s,{style:{width:"300px"},modelValue:e.value.confirmPassword,"onUpdate:modelValue":o[2]||(o[2]=l=>e.value.confirmPassword=l),"show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(d,null,{default:a(()=>[r(m,{type:"primary",onClick:f},{default:a(()=>[w("提交")]),_:1}),r(m,{onClick:c},{default:a(()=>[w("重置")]),_:1})]),_:1})]),_:1},8,["model","rules"])])]),_:1})}}};export{Z as default};
