import{q as w,s as i,X as E,o as c,a as d,w as o,y as f,v as r,e as l,J as U,x as m,E as n,bN as x,K as A,F as S,G as C}from"./index-D_cLxG2-.js";import{_ as I,E as B}from"./_plugin-vue_export-helper-BJ_779cT.js";import{E as N}from"./el-progress-qiyrmTpu.js";import{P}from"./PageContainer-62ADIkh2.js";/* empty css                   */import"./_baseClone-BvHzcH4-.js";import"./isEqual-C5QKy3BS.js";const R=s=>(S("data-v-2a5ac188"),s=s(),C(),s),F=R(()=>f("h2",null,"更换头像",-1)),V={style:{"margin-top":"20px"}},b=["src"],q={__name:"UserAvatar",setup(s){const p=w(),e=i();(()=>{try{e.value=p.user.user_pic}catch(a){console.error("获取头像失败",a)}})();const u=i(),v=a=>{const t=new FileReader;t.readAsDataURL(a.raw),t.onload=()=>{e.value=t.result}},h=async()=>{if(!e.value){n.error("请先选择图片");return}try{await x(e.value),await p.getUser(),n.success("头像上传成功")}catch(a){console.error("上传头像失败",a),n.error("上传头像失败")}};return(a,t)=>{const y=E("Plus"),g=A,k=N,_=B;return c(),d(P,null,{default:o(()=>[F,f("div",V,[r(k,{ref_key:"uploadRef",ref:u,"auto-upload":!1,class:"avatar-uploader","show-file-list":!1,"on-change":v},{default:o(()=>[l(e)?(c(),U("img",{key:0,src:l(e),class:"avatar"},null,8,b)):(c(),d(g,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[r(y)]),_:1}))]),_:1},512),r(_,{onClick:t[0]||(t[0]=$=>l(u).$el.querySelector("input").click()),size:"small",type:"primary"},{default:o(()=>[m("选择图片")]),_:1}),r(_,{size:"small",type:"success",onClick:h},{default:o(()=>[m("上传头像")]),_:1})])]),_:1})}}},X=I(q,[["__scopeId","data-v-2a5ac188"]]);export{X as default};
